#!/usr/bin/bash -
r='\033[0m';g='\033[32m';m='\033[35m';b='\033[34m';if [[ $(echo $EUID) != '0' ]]; then echo -e "$b- I wish I were$g sudo$b :($r";exit;fi; export IP=$1; echo -e "$b- Starting Port Scan on $m$IP$b..$r\n"; { ports=$(nmap -p- --min-rate=1000 -T4 $IP -v | grep --line-buffered Discovered |tee /dev/fd/3 | cut -d '/' -f 1 | cut -d ' ' -f 4 | tr '\n' ',' | sed s/,$//); } 3>&1; export PORTS=$ports; if [[ $ports == '' ]]; then echo -e "\n$b- Sorry, All ports are Closed\n\n- Try Smarter, Man! Bye ;)";exit;else echo -e "$b- Open ports: $m$ports";fi; echo -e "\n$b- Initializing Service Scan..$r";filename=scan_result_for_$IP.txt; echo -e "$b- Scan results will be saved to $g$filename$b upon completion$r\n";nmap -p$ports -sSCV $IP | tee $filename; echo -e "\n$b- Happy Hacking, Bye :)$r";
